<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro</title>
    <link rel="stylesheet" href="../../assets/css/criarusuario.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <img src="../../assets/images/logo.png" alt="Logo" class="logo">
            </div>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Feed</a></li>
                <li><a href="#">Sobre Nós</a></li>
                <li><a href="#" class="ativo">Cadastrar-se</a></li>
            </ul>
            <div>
                <img src="../../assets/images/placeholdericon.png" alt="icon" class="icon-perfil">
            </div>
        </nav>
    </header>
    <main>
        <section class="formulario">
            <h1>Crie sua conta - Agente cultural</h1>
            <form id="cadastroForm">
                <input type="text" id="nome" placeholder="Nome que deseja utilizar" required>
                <input type="email" id="email" placeholder="E-mail" required>
                <input type="email" id="confirmaEmail" placeholder="Confirme seu E-mail" required>
                <input type="password" id="senha" placeholder="Senha" required>
                <input type="password" id="confirmaSenha" placeholder="Confirme sua senha" required>
                
                <label for="generoEvento">Gênero dos Eventos:</label>
                <select id="generoEvento" required>
                    <option value="" disabled selected>Selecione o gênero do evento</option>
                    <option value="musica">Música</option>
                    <option value="teatro">Teatro</option>
                    <option value="danca">Dança</option>
                    <option value="arte">Arte</option>
                </select>

                <label>
                    <input type="checkbox" id="temCnpj">
                    Tem CNPJ?
                </label>
                
                <input type="text" id="cnpj" placeholder="Digite o CNPJ" style="display: none;">

                <button type="submit">Cadastrar</button>
                <p>Já tem uma conta? <a href="#">Faça login</a></p>
            </form>
        </section>
    </main>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const form = document.getElementById("cadastroForm");
            const temCnpjCheckbox = document.getElementById("temCnpj");
            const cnpjField = document.getElementById("cnpj");

            temCnpjCheckbox.addEventListener("change", function() {
                cnpjField.style.display = temCnpjCheckbox.checked ? "block" : "none";
            });

            function salvarDadosLocalmente(dados) {
                const usuariosExistentes = JSON.parse(localStorage.getItem('usuarios')) || [];
                usuariosExistentes.push(dados);
                localStorage.setItem('usuarios', JSON.stringify(usuariosExistentes));
            }

            // Evento de envio do formulário
            form.addEventListener("submit", function(event) {
                event.preventDefault();

                const nome = document.getElementById("nome").value;
                const email = document.getElementById("email").value;
                const confirmaEmail = document.getElementById("confirmaEmail").value;
                const senha = document.getElementById("senha").value;
                const confirmaSenha = document.getElementById("confirmaSenha").value;
                const generoEvento = document.getElementById("generoEvento").value;
                const temCnpj = temCnpjCheckbox.checked;
                const cnpj = temCnpj ? cnpjField.value : null;

                if (email !== confirmaEmail) {
                    alert("Os e-mails não coincidem.");
                    return;
                }
                if (senha !== confirmaSenha) {
                    alert("As senhas não coincidem.");
                    return;
                }

                const dadosUsuario = {
                    nome,
                    email,
                    senha, 
                    generoEvento,
                    temCnpj,
                    cnpj
                };

                salvarDadosLocalmente(dadosUsuario);

                alert("Usuário cadastrado com sucesso!");
                form.reset();
                cnpjField.style.display = "none";
            });
        });
    </script>
</body>
</html>
